---
layout: post
category: Python
tags: ['textmining']
date: 2021-10-11

title: Text with Python - String
author: Akai Red
description:
    파이썬 문자열 처리의 기본을 학습한다.
image:
    https://res.cloudinary.com/dhchweuhy/image/upload/c_fill,w_760,h_399,r_5,f_auto,q_auto/lrc/20220211_img1
optimized_image:
    https://res.cloudinary.com/dhchweuhy/image/upload/c_fill,w_380,h_200,r_5,f_auto,q_auto/lrc/20231011_img1

show_thumbnail: true
math: true
published: true
---

문자열*String*은 파이썬의 주요 자료형 중 하나다. 이름 그대로 문자를 다루며 정수*int*나 부동소수점*float* 같은 숫자형 자료형과는 다르다. 코딩테스트부터 텍스트마이닝까지 두루 쓰이는 문자열 자료형 기초를 정리하였다.


## Indexing and Slicing
### Indexing
```python
text = "Hello, World!"
first_character = text[0]  # Access the first character
```
인덱싱*Indexing*은 숫자 인덱스를 사용하여 문자열 내의 개별 문자에 접근하는 것을 말한다. 문자열 내의 특정 문자에 접근하려면 대괄호를 사용한다. 인덱싱을 사용하면 한 번에 하나의 문자만에 접근할 수 있다.

### Slicing
```python
text = "Hello, World!"
sliced_text = text[0:5]  # Extracts "Hello"
```
슬라이싱*Slicing*은 범위를 지정하여 문자열에서 부분 문자열을 추출하는 것을 말한다. 슬라이싱 문법은 문자열[시작:끝]으로 시작은 슬라이스가 시작되는 인덱스(포함), 끝은 슬라이스가 끝나는 인덱스(제외)를 나타낸다. 시작을 생략하면 문자열의 시작으로, 끝을 생략하면 문자열의 끝으로 간주한다.


## String Formatting
```python
name = 'Red'

print(f'Hello, my name is {name}')          # 1. f-strings (Python 3.6+)
print('Hello, my name is {}'.format(name))  # 2. Python 2.7+
print('Hello, my name is %s' % name)        # 3. old-style

# Hello, my name is Red
```  
문자열 안에 변수를 사용할 수도 있다. 파이썬 3.6 이후부터는 **f-strings**을 사용할 수 있는데 가독성이 좋으므로 이쪽을 권한다. 이전 버전부터 사용하던 사람은 `%`나 `.format` 형식이 익숙할 것이다. 변수가 적을 때는 큰 상관이 없지만 변수가 많아지면 확인이 어려우므로 추천하지 않는다.

<!-- 
```python
# 1.function-like formatting
command = 'conda install numpy={np_version} scipy={sp_version}'
print(command.format(np_version='1.19.0', sp_version='1.11.3'))

# 2.raw string
import matplotlib.pyplot as plt
alpha, beta = (3, 4)

plt.text(x=0.4, y=0.3, s=r'$\alpha$={}, $\beta$={}'.format(alpha, beta), size=20) 
plt.text(x=0.4, y=0.6, s=fr'$\alpha$={alpha}, $\beta$={beta}', size=20)
plt.axis('off')
plt.show()

# 3. function in string
print(f'$\alpha$={alpha / 100}, $\beta$={np.sqrt(beta)}' # a=0.04, b=1.7320508075688772)

# 4. decimal points
print(f'$\alpha$={alpha / 100}, $\beta$={np.sqrt(beta)}' # a=0.04, b=1.7320508075688772)
```
`.format()`

**raw string**은 

f-string을 사용하면 문자열 안에 직접 함수를 입력할 수 있다. 내장 함수 뿐만 아니라 `numpy` 등의 외장함수 값도 마찬가지다.  -->

### # function-like formatting
```python
# query.txt: 'conda install numpy={np_version} scipy={sp_version}'

with open('query.txt', 'r') as fr:
    query = fr.read().format(
        np_version='1.19.0', 
        sp_version='1.11.3')
        )

print(query)  # 'conda install numpy=1.19.0 scipy=1.11.3'
```

`.format` 형식이 보기 좋은 경우도 있다. `.format`은 위와 같이 문자열을 함수처럼 작성할 수 있게 해준다. 특히 `open`을 사용해서 외부 텍스트 파일을 불러올 경우 `.format` 메서드를 사용하면 변수 설정이 가능하다.


## String Methods
### find, count, replace
```python
text = 'This is an example sentence'

text.find('example')    # 11
text.index('example')   # 11
text.count('e')         # 4
text.replace('e', 'a')  # 'This is an axampla santanca'
```
`str.find()`는 문자열에서 특정 문자열이 처음으로 등장하는 인덱스를 반환한다. 만약 찾는 문자열이 없으면 `-1`을 반환한다. `str.index()`는 `find()`와 동일한 기능을 하지만 찾는 문자열이 없으면 오류를 발생시킨다. `str.count()`는 문자열에서 특정 문자열이 등장하는 횟수를 반환한다. `str.replace()`는 문자열에서 특정 문자열을 다른 문자열로 바꾼 결과를 반환한다.

### startswith, endswith
```python
text = 'This is an example sentence'

text.startswith('This')     # True
text.endswith('This')       # False
```
`str.startswith()`, `str.endswith()`를 사용하면 문자열의 시작과 끝이 원하는 문자와 일치하는지 확인할 수 있다. 조건은 괄호 안에 명시하며 결과에 따라 `True` 혹은 `False` 값을 반환한다. `endswith()`은 특히 특정 확장자를 골라낼 때 유용하다. 

### upper, lower
```python
text = 'This is an example sentence'

text.upper()    # 'THIS IS AN EXAMPLE SENTENCE'
text.lower()    # 'this is an example sentence'
text.title()    # 'This Is An Example Sentence'
```
`str.upper()`, `str.lower()`, `str.title()`을 사용하면 문자열을 대문자, 소문자, 첫 글자만 대문자로 바꿀 수 있다. 데이터 분석 시 문자열 데이터가 통일되어 있지 않은 경우가 많다. 기계적으로 분석하면 'test'와 'Test'를 다른 값으로 취급하게 되는데 `.upper()` 혹은 `.lower()`를 사용해서 하나로 통일시켜주는 것이 좋다. 

### isalpha, isalnum, isdecimal
```python
text = 'This is an example sentence'

text.isalpha()      # False
text.isalnum()      # False
text.isdecimal()    # False
text.isspace()      # False
text.islower()      # False
text.isupper()      # False
```
`str.isalpha()`, `str.isalnum()`, `str.isdecimal()`, `str.isspace()`, `str.islower()`, `str.isupper()`를 사용하면 문자열이 특정 조건에 부합하는지 확인할 수 있다. `isalpha()`는 문자열이 알파벳으로만 이루어져 있는지, `isalnum()`은 알파벳과 숫자로만 이루어져 있는지, `isdecimal()`은 숫자로만 이루어져 있는지, `isspace()`는 공백으로만 이루어져 있는지, `islower()`는 소문자로만 이루어져 있는지, `isupper()`는 대문자로만 이루어져 있는지 확인한다. 조건에 부합하면 `True`를 반환하고, 아니면 `False`를 반환한다.

### split, join
```python
text = 'This is an example sentence'

text.split()    # ['This', 'is', 'an', 'example', 'sentence']
text = ' '.join(text_list)  # 'This is an example sentence'
```
`str.split()`은 문자열을 특정 조건에 따라 나눈다. `sep` 파라미터를 사용해 어떤 조건으로 문자열을 나눌지 정할 수 있다. 빈칸을 기준으로 나누기 위해서는 `sep=' '`를 사용하면 된다. 일반 문자열을 사용할 수도 있으며 `\n`, `\t` 등의 이스케이프 문자열도 사용할 수 있다. 
`''.join(list)`를 사용하면 `split`과는 반대로 문자열을 하나로 합칠 수 있다. 합칠 때의 기준은 `.join` 앞 문자열이며 `split` 메서드의 `sep` 파라미터와 정반대의 역할을 한다.

### strip, lstrip, rstrip
```python
text = 'This is an example sentence'

text.strip()      # 문자열 왼쪽/오른쪽 공백 제거
text.lstrip()     # 문자열 왼쪽 공백 제거
text.rstrip()     # 문자열 오른쪽 공백 제거

# This is a sentence
# This is a sentence
#   This is a sentence
```
`str.strip()`은 문자열 앞뒤의 필요없는 문자를 삭제한 결과를 돌려준다. 기본값은 공백을 제외하며 `str.strip([chars])` 형태로 다른 문자열을 지정해줄 수도 있다. `str.lstrip()`은 문자열의 앞만, `str.rstrip()`은 문자열의 뒤만 필요없는 문자를 제거한다.
