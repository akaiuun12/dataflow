---
layout: post
category: SQL
tags: ['sql']

date: 2025-02-02
author: Akai Red
title: SQL 201 - Set Operations
description: 

# image: 
#     https://res.cloudinary.com/dhchweuhy/image/upload/c_fill,w_760,h_399,r_5,f_auto,q_auto/lrc/20220301_img1
# optimized_image: 
#     https://res.cloudinary.com/dhchweuhy/image/upload/c_fill,w_380,h_200,r_5,f_auto,q_auto/lrc/20220301_img1

show_thumbnail: true
math: true
published: false
---

## UNION
```sql
SELECT 컬럼명1, 컬럼명2 FROM 테이블1
 UNION 
SELECT 컬럼명1, 컬럼명2 FROM 테이블2
 ORDER BY 컬럼명1
```
`UNION`은 단순하게 두 테이블을 합친다. 집합 연산에서의 합집합을 의미한다. `JOIN`이 컬럼 방향으로 합친다고 생각한다면, `UNION`은 로우 방향으로 합친다고 생각할 수 있다.

로우 방향으로 합치는 집합 연산의 특성상, `SELECT`절에서 명시하는 컬럼은 동일해야 한다. 이는 `UNION` 뿐만 아니라 아래에서 설명할 `UNION ALL`, `MINUS`, `INTERSECT` 등 다른 집합 연산자도 같다. 

합친 테이블을 정렬하고 싶다면 아랫쪽에만 `ORDER BY`를 써주면 된다. 어차피 합치고 나서 유일성 검증을 위해 정렬하기 때문에 위쪽에는 작성하지 않는다.

## UNION ALL
```sql
SELECT 컬럼명1, 컬럼명2 FROM 테이블1
 UNION ALL
SELECT 컬럼명1, 컬럼명2 FROM 테이블2
```
`UNION ALL`은 **중복을 허용하여** 두 테이블을 합친다는 점에서 `UNION`과 다르다. 중복을 확인하기 위한 정렬*Sorting* 과정이 생략되었기 때문에 `UNION ALL`이 `UNION`보다 쿼리 효율이 좋다. 

## MINUS
```sql
SELECT 컬럼명1, 컬럼명2 FROM 테이블1
 MINUS
SELECT 컬럼명1, 컬럼명2 FROM 테이블2
```

`MINUS`는 선행 테이블(테이블1)에서 후행 테이블(테이블2)의 값을 제외한 결과를 반환한다. 집합 연산의 차집합에 해당한다. `UNION`이 중복을 처리하는 방법과 동일하게 명시된 컬럼 기준으로만 판단한다.

## INTERSECT
```sql
SELECT 컬럼명1, 컬럼명2 FROM 테이블1
INTERSECT
SELECT 컬럼명1, 컬럼명2 FROM 테이블2
```

`INTERSECT`는 두 테이블 공통으로 존재하는 데이터를 반환한다. 집합 연산의 교집합에 해당한다. `INNER JOIN`의 조인키 설정으로 거의 유사한 결과를 얻을 수 있기 때문에 `INTERSECT`는 잘 사용하지 않는다.
